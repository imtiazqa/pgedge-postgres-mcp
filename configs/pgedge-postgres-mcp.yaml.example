# pgEdge PostgreSQL MCP Server Configuration File
#
# Configuration Priority (highest to lowest):
#   1. Command line flags
#   2. Environment variables
#   3. Configuration file values (this file)
#   4. Hard-coded defaults
#
# Copy this file to pgedge-postgres-mcp.yaml and customize as needed.
# By default, the server looks for config in the same directory as the binary.

# Database Configuration
database:
  # PostgreSQL connection string
  # Format: postgres://[user[:password]@][host][:port][/dbname][?params]
  # Example: postgres://myuser:mypass@localhost:5432/mydb?sslmode=disable
  # Environment variable: POSTGRES_CONNECTION_STRING
  # Command line flag: -db
  connection_string: "postgres://localhost/postgres?sslmode=disable"

# Anthropic AI Configuration
anthropic:
  # Anthropic API key for Claude AI
  # Get yours at: https://console.anthropic.com/
  # Environment variable: ANTHROPIC_API_KEY
  # Command line flag: -api-key
  api_key: "sk-ant-your-api-key-here"

  # Claude model to use
  # Options: claude-sonnet-4-5, claude-haiku-4-5, claude-opus-4-1
  # Default: claude-sonnet-4-5
  # Environment variable: ANTHROPIC_MODEL
  # Command line flag: -model
  model: "claude-sonnet-4-5"

# HTTP/HTTPS Server Configuration
http:
  # Enable HTTP transport mode
  # If false, server runs in stdio mode (for Claude Desktop)
  # Default: false
  # Command line flag: -http
  enabled: false

  # HTTP server address
  # Format: host:port or :port
  # Default: :8080
  # Command line flag: -addr
  address: ":8080"

  # TLS/HTTPS Configuration
  tls:
    # Enable HTTPS (requires http.enabled: true)
    # Default: false
    # Command line flag: -https
    enabled: false

    # Path to TLS certificate file
    # Default: ./server.crt
    # Command line flag: -cert
    cert_file: "./server.crt"

    # Path to TLS private key file
    # Default: ./server.key
    # Command line flag: -key
    key_file: "./server.key"

    # Path to TLS certificate chain file (optional)
    # Default: "" (empty)
    # Command line flag: -chain
    chain_file: ""

  # Authentication Configuration
  auth:
    # Enable API token authentication (requires http.enabled: true)
    # Default: true (authentication is enabled by default)
    # Command line flag: -no-auth (to disable)
    enabled: true

    # Path to API token configuration file
    # Default: Same directory as binary (api-tokens.yaml)
    # Command line flag: -token-file
    # Create tokens with: pgedge-postgres-mcp -add-token
    token_file: ""

# Example configurations for different deployment scenarios:

# Example 1: Local development with HTTP (no authentication - not recommended)
# http:
#   enabled: true
#   address: "localhost:8080"
#   tls:
#     enabled: false
#   auth:
#     enabled: false

# Example 2: Local development with HTTP and authentication
# http:
#   enabled: true
#   address: "localhost:8080"
#   tls:
#     enabled: false
#   auth:
#     enabled: true
#     token_file: "./api-tokens.yaml"

# Example 3: Production HTTPS deployment with authentication
# http:
#   enabled: true
#   address: ":443"
#   tls:
#     enabled: true
#     cert_file: "/etc/ssl/certs/server.crt"
#     key_file: "/etc/ssl/private/server.key"
#     chain_file: "/etc/ssl/certs/ca-chain.crt"
#   auth:
#     enabled: true
#     token_file: "/etc/pgedge-mcp/tokens.yaml"

# Example 4: Claude Desktop mode (stdio, no HTTP)
# http:
#   enabled: false
# (This is the default behavior when http.enabled is false)
